<!-- articles/templates/articles/index.html -->

{% extends "base.html" %}
{% load static %}

{% block head-content %}
<style>
#content {
    display: flex;
    padding: 24px;
    text-align: justify;
}

#main {
    flex-grow: 1;
    padding-right: 24px;
}

#main img {
    width: 100%;
    margin-bottom: 12px;
}

#main h1 {
    text-transform: uppercase;
    font-weight: 900;
    font-size: 42px;
    text-align: center;
    text-wrap: pretty;
    line-height: 1.25;
    margin-bottom: 12px;
}

h1 a {
    color: black;
    text-decoration: none;
}

#main > div > p.byline {
    text-align: center;
}

p.byline a {
    color: inherit;
    text-decoration: none;
    font-weight: bold;
}

#main hr {
    border-width: 0;
    margin: 24px 0;
    height: 1px;
    background-color: #888;
}

.module-1 {
    display: flex;
}

.module-1 .module-column {
    width: 240px;
    padding-right: 24px;
    box-sizing: content-box;
    border-right: 1px solid #888;
    flex-shrink: 0;
}

.module-column h2 {
    margin-bottom: 12px;
    text-align: center;
}

#main .module-column img {
    margin-bottom: 6px;
}

.module-column p.byline {
    margin-bottom: 6px;
    text-align: center;
}

.module-column p {
    margin-bottom: 6px;
    font-size: 14px;
}

.module-1 .module-wide {
    padding-left: 24px;
    flex-grow: 1;
}

.module-wide p.byline {
    margin-bottom: 12px;
}

.module-wide p {
    font-size: 14px;
}

.module-wide > div {
    margin-bottom: 24px;
}

#sidebar {
    padding-left: 24px;
    box-sizing: content-box;
    width: 300px;
    max-width: 25vw;
    flex-shrink: 0;
    border-left: 1px solid #888;
}

#sidebar > div {
    margin-bottom: 24px;
}

h2 {
    font-weight: 900;
    font-size: 24px;
    text-wrap: pretty;
    line-height: 1.25;
    margin-bottom: 2px;
    text-align: left;
}

h2 a {
    color: black;
    text-decoration: none;
}

#sidebar p.byline {
    margin-bottom: 12px;
}

#sidebar p {
    font-size: 14px;
    margin-bottom: 6px;
}

#ticker {
    position: fixed;
    bottom: 0;
    left: 0;
    padding: 4px 0;
    background-color: #121212;
    color: #ffffff;
    font-weight: 500;
    font-family: 'Roboto';
}

#ticker > div {
    overflow-x: hidden;
    white-space: pre;
    animation-name: ticker;
    animation-timing-function: linear;
    animation-duration: 60s;
    animation-iteration-count: infinite;
}

#ticker > div::after {
    content: ' • ';
}

@keyframes ticker {
    0% {
        transform: translate(0, 0);
    }
    100% {
        transform: translate(-50%, 0);
    }
}

@media (prefers-reduced-motion) {
    #ticker > div {
        animation: none !important;
        position: relative;
        top: 0;
        left: 50vw;
        transform: translate(-50%, 0);
    }

    #ticker > div::after {
        content: none;
    }
}

@media (max-width: 1200px) {
    #wrapper {
        width: 100%;
        max-width: unset;
    }
}

@media (max-width: 960px) {
    #main {
        padding-right: 0;
    }

    #sidebar {
        display: none;
    }
}

@media (max-width: 826px) {
    #splash {
        display: none;
    }
}
</style>
{% endblock head-content %}

{% block page-content %}

<div id="main">
    {% with largest=feat_articles.largest %}
    <div>
        <img src="{{MEDIA_URL}}/{{largest.images.first.image}}"/>

        <h1><a href="{% url 'article_detail' largest.slug %}">
            {{ largest.title }}
        </a></h1>
        <p class="byline">By {% for author in largest.authors.all %}
            <a href="{% url 'article_author' author.name %}">
                {{ author.name }}
            </a>
        {% endfor %} • 
        {% with issue=largest.issues %}
            Vol {{issue.vol}} Issue {{issue.num}}
        {% endwith %}
        </p>
    </div>
    {% endwith %}
    
    <hr>

    <div class="module-1">
        <div class="module-column">
            {% with column=feat_articles.column %}
            <div>
                <h2>
                    <a href="{% url 'article_detail' column.slug %}">
                        {{ column.title }}
                    </a>
                </h2>
                <p class="byline">By 
                    {% for author in column.authors.all %}
                        <a href="{% url 'article_author' author.name %}">
                            {{ author.name }}
                        </a>
                    {% endfor %}
                </a> • {{column.created_on|date:"DATE_FORMAT"}}</p>
        
                {% load tag %}
                {{ column.body|create_md|imgswitch:"article_images/" | safe }}
                <p><a href="{% url 'article_detail' column.slug %}">Read more</a></p>
            </div>
            {% endwith %}
        </div>

        <div class="module-wide">
            {% with article=feat_articles.article %}
            <div>
                <h2>
                    <a href="{% url 'article_detail' article.slug %}">
                        {{ article.title }}
                    </a>
                </h2>
                <p class="byline">By 
                    {% for author in article.authors.all %}
                        <a href="{% url 'article_author' author.name %}">
                            {{ author.name }}
                        </a>
                    {% endfor %}
                </a> • {{article.created_on|date:"DATE_FORMAT"}}</p>
        
                {% load tag %}
                {{article.body | create_md | safe | truncatewords_html:50}}
                <p><a href="{% url 'article_detail' article.slug %}">Read more</a></p>
            </div>
            {% endwith %}
            <hr>
            
            {% with image=feat_articles.image %}
            <div>
                <a href="{% url 'article_detail' image.slug %}">
                    <img src="{{MEDIA_URL}}/{{image.images.first.image}}" alt="image.images.first.alt_text"/>
                </a>
            </div>
            {% endwith %}
        </div>
    </div>
</div>

<div id="sidebar">
    {% for article in rand_articles %}
        <div>
            <h2>
                <a href="{% url 'article_detail' article.slug %}">
                    {{ article.title }}
                </a>
            </h2>
            <p class="byline">By
                {% for author in article.authors.all %}
                    <a href="{% url 'article_author' author.name %}">
                        {{ author.name }}
                    </a>
                {% endfor %}
            </a> • {{article.created_on|date:"DATE_FORMAT"}}</p>
    
            {% load tag %}
            {{article.body | create_md | safe | truncatewords_html:50}}
            <p><a href="{% url 'article_detail' article.slug %}">Read more</a></p>
        </div>
    {% endfor %}

</div>
{% endblock page-content %}

{% block after-container-content %}
<div id="ticker"><div>It's a Christmas Miracle! Readme disbanded • Santa is proud of you, even if no one else is • Duct tape, gags and other gifts for your conservative relatives • Tucker Carlson finally proposes to Green M&M • Hallmark Movie Cityboy Exes Support Group opens doors • Santa takes unannounced detour, US goes to DEFCON 2 • Christmas Wishes Granted: CEO Shot • Naughty List leaked • Mrs. Claus revealed to actually be Amy Schumer • I met Santa Claus, she's black • TikTok caught selling data to Santa to determine Naughty/Nice list • Reindeer waste on Epstein Island raises concerns • Supreme Court overturns Naughty List affirmative action • Elves join UAW Local 1701 • Breaking: Worst man you know is about to dangle mistletoe over his head • Child tries to separate parents to get two Christmases • It's a Christmas Miracle! Readme disbanded • Santa is proud of you, even if no one else is • Duct tape, gags and other gifts for your conservative relatives • Tucker Carlson finally proposes to Green M&M • Hallmark Movie Cityboy Exes Support Group opens doors • Santa takes unannounced detour, US goes to DEFCON 2 • Christmas Wishes Granted: CEO Shot • Naughty List leaked • Mrs. Claus revealed to actually be Amy Schumer • I met Santa Claus, she's black • TikTok caught selling data to Santa to determine Naughty/Nice list • Reindeer waste on Epstein Island raises concerns • Supreme Court overturns Naughty List affirmative action • Elves join UAW Local 1701 • Breaking: Worst man you know is about to dangle mistletoe over his head • Child tries to separate parents to get two Christmases</div></div>

<!-- Make sure this runs after font has loaded!!! -->
<script>
    {
        const ticker = document.getElementById("ticker");
        ticker.firstChild.style.animationDuration = (ticker.offsetWidth / 200) + "s";
    }
</script>
{% endblock after-container-content %}

{% comment %}
{% block page-content %}
<div class="row" style=" margin-right: 0px; margin-left: 0px;">
    <div class="col-md-3"></div><!-- spacer div -->
        <div class="col-md-6">
            {% for article in articles %}
                {% include "./article_card.html" %}  
            {% endfor %}
        </div>
    <div class="col-md-3"></div><!-- spacer div -->
</div>
{% endblock page-content %}
{% endcomment %}